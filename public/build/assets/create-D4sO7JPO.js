import{j as e,q as v,v as N,r as c,$ as w,a as y}from"./app-BMROpo09.js";import{H as _}from"./field-DSxs9b6x.js";import{S as k}from"./input-szrot8Uq.js";import{Q as C}from"./label-C5Mamx28.js";import{a as S}from"./button-BnE1jUUs.js";import{A as D}from"./app-layout-BGiw--u8.js";import"./index-DdiUD4wl.js";import"./use-sync-refs-Dt1MV7Ti.js";import"./index-Dcy6PrQj.js";function o({name:d,value:r,type:m,error:n,label:l,onChange:s}){return e.jsxs("div",{className:"w-full max-w-md px-4",children:[e.jsxs(_,{children:[e.jsx(C,{className:"text-sm/6 font-medium",children:l}),e.jsx(k,{type:m,name:d,onChange:s,value:r,className:S("block w-full rounded-lg border px-3 py-1.5 text-sm/6","focus:not-data-focus:outline-none data-focus:outline-2 data-focus:-outline-offset-2")})]}),n&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:n})]})}function I({auth:d,success:r}){const{props:m}=v(),{categorysPosts:n}=m,{data:l,setData:s,post:g,processing:h,errors:a}=N({title:"",slug:"",content:"",category_id:"",featured_image:null,status:"draft",published_at:"",excerpt:"",meta_title:"",meta_description:"",user_id:d.user.id}),[p,u]=c.useState(null);c.useEffect(()=>{if(r){u(r);const t=setTimeout(()=>u(null),5e3);return()=>clearTimeout(t)}},[r]);const i=new Date,f=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}T${String(i.getHours()).padStart(2,"0")}:${String(i.getMinutes()).padStart(2,"0")}`,[M,b]=c.useState(null);c.useEffect(()=>{(async()=>{try{const x=await y.get(route("categories"));setCategories(x.data)}catch(x){console.error("Failed to fetch initial data:",x)}})()},[]);const j=t=>{t.preventDefault(),g(route("posts.store"),{onSuccess:()=>{s({title:"",slug:"",content:"",category_id:"",featured_image:null,status:"draft",published_at:"",excerpt:"",meta_title:"",meta_description:"",user_id:d.user.id}),b(null)}})};return e.jsxs(D,{children:[e.jsx(w,{title:"Create New Post"}),p&&e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsxs("div",{className:"rounded bg-green-500 px-4 py-2 text-white shadow-lg",children:[p,e.jsx("button",{onClick:()=>u(null),className:"ml-2",children:"âœ•"})]})}),e.jsx("div",{className:"min-h-screen px-4 py-8 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Create New Post"}),e.jsxs("button",{type:"button",onClick:()=>window.history.back(),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-1 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{className:"overflow-hidden rounded-lg shadow-md",children:[e.jsxs("div",{className:"border-b p-6",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold",children:"Post Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(o,{label:"Title",id:"title",type:"text",value:l.title,onChange:t=>s("title",t.target.value),error:a.title,required:!0,className:"text-lg font-medium"})}),e.jsx("div",{className:"md:col-span-1",children:e.jsx(o,{label:"Slug",id:"slug",type:"text",value:l.slug,onChange:t=>s("slug",t.target.value),error:a.slug,required:!0})}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"category_id",children:"Category"}),e.jsx("select",{id:"category_id",onChange:t=>s("category_id",t.target.value),className:"mt-1 block w-full rounded-md border py-2 shadow-sm",required:!0,children:n.map(t=>e.jsx("option",{className:"text-black",value:t.id,children:t.name},t.id))}),a.category_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.category_id})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(o,{label:"featured_image",id:"featured_image",type:"text",value:l.featured_image,onChange:t=>s("featured_image",t.target.value),error:a.title,required:!0,className:"text-lg font-medium"})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"excerpt",children:"Excerpt"}),e.jsx("textarea",{id:"excerpt",rows:3,value:l.excerpt,onChange:t=>s("excerpt",t.target.value),className:"mt-1 block w-full rounded-md border shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"A brief summary of your post"}),a.excerpt&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.excerpt})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",htmlFor:"content",children:"Content"}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("code",{className:"code-block",children:e.jsx("textarea",{id:"content",rows:20,value:l.content,onChange:t=>s("content",t.target.value),className:"block w-full rounded-md border shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"A brief summary of your post"})})}),a.content&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.content})]})]}),e.jsxs("div",{className:"border-b p-6",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold",children:"Publication Settings"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"status",children:"Status"}),e.jsxs("select",{id:"status",value:l.status,onChange:t=>s("status",t.target.value),className:"mt-1 block w-full rounded-md border py-2 shadow-sm",children:[e.jsx("option",{className:"text-black",value:"draft",children:"Draft"}),e.jsx("option",{className:"text-black",value:"published",children:"Published"}),e.jsx("option",{className:"text-black",value:"archived",children:"Archived"})]})]}),l.status==="published"&&e.jsx("div",{children:e.jsx(o,{label:"Publish Date",id:"published_at",type:"datetime-local",value:l.published_at||f,onChange:t=>s("published_at",t.target.value),error:a.published_at})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 rounded-md p-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("h2",{className:"ml-3 text-xl font-semibold",children:"SEO Settings"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{label:"Meta Title",id:"meta_title",type:"text",value:l.meta_title,onChange:t=>s("meta_title",t.target.value),error:a.meta_title,placeholder:"SEO optimized title (recommended: 50-60 characters)"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"meta_description",children:"Meta Description"}),e.jsx("textarea",{id:"meta_description",rows:3,value:l.meta_description,onChange:t=>s("meta_description",t.target.value),className:"mt-1 block w-full rounded-md border shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Brief description for search engines (recommended: 150-160 characters)"}),a.meta_description&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.meta_description})]})]})]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"mr-3 inline-flex justify-center rounded-md border px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50",children:h?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"mr-2 -ml-1 h-4 w-4 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Post"})]})]})]})})]})}export{I as default};
